
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>E-Rabani - Dashboard Bencana Canggih</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --bg-color: #f8fafc; 
      --card-bg: #ffffff; 
      --text-primary: #1e293b;
      --text-secondary: #64748b; 
      --accent-primary: #3b82f6;
      --accent-secondary: #0ea5e9;
      --danger: #ef4444;
      --warning: #f59e0b;
      --success: #10b981;
      --info: #8b5cf6;
      --shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
      --border-radius: 16px; 
      --font-family: 'Poppins', sans-serif;
      --gradient-primary: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
    }
    
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
    }
    
    html { 
      scroll-behavior: smooth; 
    }
    
    body { 
      font-family: var(--font-family); 
      background-color: var(--bg-color); 
      color: var(--text-primary); 
      line-height: 1.6;
      min-height: 100vh;
    }
    
    .app-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Header Styles */
    .page-header { 
      padding: 30px 0 15px; 
      position: relative;
      overflow: hidden;
    }
    
    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      flex-wrap: wrap;
    }
    
    .header-title-group {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .logo {
      width: 60px;
      height: 60px;
      background: var(--gradient-primary);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.8rem;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }
    
    .header-titles {
      display: flex;
      flex-direction: column;
    }
    
    .header-title { 
      font-size: 2.2rem; 
      font-weight: 700; 
      color: var(--text-primary); 
      line-height: 1.2;
      letter-spacing: -0.5px;
    }
    
    .header-subtitle { 
      font-size: 1.05rem; 
      color: var(--text-secondary); 
      margin-top: 4px; 
      font-weight: 400;
    }
    
    .header-date {
      background: rgba(14, 165, 233, 0.1);
      color: var(--accent-secondary);
      padding: 8px 16px;
      border-radius: 30px;
      font-size: 0.95rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    /* Alert Banner */
    .alert-banner {
      background-color: #fffbeb;
      border-left: 4px solid var(--warning);
      border-radius: 12px;
      padding: 14px 20px;
      margin: 20px 0 30px;
      display: flex;
      align-items: center;
      gap: 15px;
      box-shadow: var(--shadow);
      animation: pulseAlert 2s infinite;
    }
    
    @keyframes pulseAlert {
      0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.2); }
      70% { box-shadow: 0 0 0 10px rgba(245, 158, 11, 0); }
      100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
    }
    
    .alert-icon {
      color: var(--warning);
      font-size: 1.4rem;
      flex-shrink: 0;
    }
    
    .alert-content {
      flex: 1;
    }
    
    .alert-title {
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 5px;
    }
    
    .alert-text {
      font-size: 0.95rem;
      color: var(--text-secondary);
    }
    
    .alert-link {
      color: var(--accent-primary);
      text-decoration: none;
      font-weight: 600;
      margin-left: 5px;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }
    
    .alert-link:hover {
      text-decoration: underline;
    }
    
    /* Main Grid */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-bottom: 40px;
    }
    
    /* Card Styles */
    .card { 
      background-color: var(--card-bg); 
      border-radius: var(--border-radius); 
      box-shadow: var(--shadow); 
      padding: 25px; 
      transition: all 0.3s ease;
      border: 1px solid rgba(0, 0, 0, 0.03);
      position: relative;
      overflow: hidden;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-primary);
    }
    
    .chart-title {
      font-size: 1.3rem; 
      font-weight: 600; 
      margin-bottom: 20px;
      display: flex; 
      justify-content: space-between; 
      align-items: center;
      color: var(--text-primary);
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .title-content {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .chart-icon {
      width: 40px;
      height: 40px;
      background: rgba(59, 130, 246, 0.1);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent-primary);
      font-size: 1.2rem;
    }
    
    .help-btn {
      background-color: #f1f5f9; 
      color: var(--text-secondary); 
      border: none;
      width: 32px; 
      height: 32px; 
      border-radius: 10px;
      font-weight: 700; 
      cursor: pointer;
      transition: all 0.2s ease; 
      display: flex;
      justify-content: center; 
      align-items: center; 
      font-size: 1rem;
    }
    
    .help-btn:hover { 
      background-color: var(--accent-primary); 
      color: white; 
    }
    
    /* Chart Styles */
    .chart-container {
      padding: 15px 0;
    }
    
    .chart { 
      height: 200px; 
      display: flex; 
      align-items: flex-end; 
      overflow-x: auto; 
      padding: 10px 5px; 
      gap: 12px; 
      -ms-overflow-style: none;  
      scrollbar-width: none;  
    }
    
    .chart::-webkit-scrollbar { 
      display: none; 
    }
    
    .bar-container { 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      flex-shrink: 0; 
      min-width: 30px;
    }
    
    .bar-group { 
      display: flex; 
      align-items: flex-end; 
      gap: 4px; 
      height: 100%;
    }
    
    .bar { 
      width: 10px; 
      border-radius: 6px 6px 0 0; 
      transition: all 0.3s ease; 
      position: relative; 
      cursor: pointer; 
    }
    
    .bar:hover { 
      transform: translateY(-5px); 
    }
    
    .bar:hover::after { 
      content: attr(data-value); 
      position: absolute; 
      top: -30px; 
      left: 50%; 
      transform: translateX(-50%); 
      background-color: var(--text-primary); 
      color: var(--card-bg); 
      padding: 6px 10px; 
      border-radius: 6px; 
      font-size: 0.85rem; 
      font-weight: 600; 
      white-space: nowrap; 
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .bar-kecil { 
      background: linear-gradient(to top, #4ade80, #22c55e); 
    } 
    
    .bar-sedang { 
      background: linear-gradient(to top, #facc15, #eab308); 
    } 
    
    .bar-kuat { 
      background: linear-gradient(to top, #fb923c, #f97316); 
    }   
    
    .label-gempa { 
      font-size: 0.8rem; 
      margin-top: 10px; 
      color: var(--text-secondary); 
      font-weight: 500;
    }
    
    .today-label {
      color: var(--accent-primary);
      font-weight: 700;
    }
    
    .legend { 
      display: flex; 
      flex-wrap: wrap; 
      justify-content: center; 
      gap: 15px; 
      margin-top: 20px; 
      font-size: 0.85rem; 
      color: var(--text-secondary); 
    }
    
    .legend-item { 
      display: flex; 
      align-items: center; 
      gap: 8px; 
      background: #f8fafc;
      padding: 6px 12px;
      border-radius: 20px;
    }
    
    .legend-color { 
      width: 16px; 
      height: 16px; 
      border-radius: 4px; 
    }
    
    /* Disaster Chart */
    .bar-chart { 
      display: flex; 
      flex-direction: column; 
      gap: 18px; 
      padding: 15px 0;
    }
    
    .bencana-bar { 
      display: flex; 
      align-items: center; 
      gap: 15px; 
    }
    
    .bencana-label { 
      width: 120px; 
      font-size: 0.95rem; 
      font-weight: 500; 
      color: var(--text-primary); 
      flex-shrink: 0; 
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .bencana-icon {
      width: 30px;
      height: 30px;
      background: rgba(59, 130, 246, 0.1);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent-primary);
    }
    
    .bar-fill-wrapper { 
      flex: 1; 
      height: 30px; 
      background-color: #f1f5f9; 
      border-radius: 30px; 
      overflow: hidden; 
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .bar-fill { 
      height: 100%; 
      width: 0; 
      border-radius: 30px; 
      animation: fillBar 1.5s ease-out forwards; 
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 15px;
      font-weight: 600;
      font-size: 0.9rem;
      color: white;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }
    
    @keyframes fillBar { 
      to { 
        width: var(--width); 
      } 
    }
    
    .fill-gempa { background: linear-gradient(to right, #ef4444, #dc2626); }
    .fill-banjir { background: linear-gradient(to right, #3b82f6, #2563eb); }
    .fill-longsor { background: linear-gradient(to right, #f59e0b, #d97706); }
    .fill-angin { background: linear-gradient(to right, #8b5cf6, #7c3aed); }
    
    .bencana-value { 
      font-size: 1rem; 
      font-weight: 700; 
      color: var(--text-primary); 
      width: 50px; 
      text-align: right; 
    }
    
    /* Map Styles */
    .map-container { 
      width: 100%; 
      height: 300px; 
      border-radius: 12px; 
      overflow: hidden; 
      border: 1px solid #e2e8f0;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      margin-top: 15px;
    }
    
    .map-container iframe { 
      width: 100%; 
      height: 100%; 
      border: none; 
    }
    
    /* Sensor Grid */
    .sensor-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 20px;
    }
    
    .sensor-item {
      background: linear-gradient(135deg, #f8fafc, #f1f5f9);
      border-radius: 14px;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 20px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.03);
      border: 1px solid rgba(0, 0, 0, 0.03);
    }
    
    .sensor-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.08);
    }
    
    .sensor-icon { 
      width: 50px;
      height: 50px;
      background: rgba(59, 130, 246, 0.1);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent-primary);
      font-size: 1.6rem;
      flex-shrink: 0;
    }
    
    .sensor-info { 
      display: flex; 
      flex-direction: column; 
      flex: 1;
    }
    
    .sensor-label { 
      font-size: 0.95rem; 
      color: var(--text-secondary); 
      margin-bottom: 5px;
    }
    
    .sensor-value { 
      font-size: 1.6rem; 
      font-weight: 700; 
      color: var(--text-primary); 
      display: flex;
      align-items: center;
    }
    
    .aqi-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-left: 10px;
    }
    
    .aqi-good { background: linear-gradient(to right, #10b981, #059669); color: white; }
    .aqi-moderate { background: linear-gradient(to right, #f59e0b, #d97706); color: white; }
    .aqi-unhealthy { background: linear-gradient(to right, #ef4444, #dc2626); color: white; }
    
    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-left: 10px;
    }
    
    .status-online { background-color: var(--success); }
    .status-offline { background-color: var(--danger); }
    
    /* Footer */
    footer { 
      text-align: center; 
      padding: 40px 0 30px; 
      margin-top: 30px; 
      border-top: 1px solid #e2e8f0; 
      background: rgba(248, 250, 252, 0.8);
    }
    
    .footer-content {
      max-width: 600px;
      margin: 0 auto;
    }
    
    .footer-icon { 
      width: 60px;
      height: 60px;
      background: var(--gradient-primary);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.8rem;
      margin: 0 auto 20px;
      box-shadow: 0 6px 12px rgba(59, 130, 246, 0.25);
    }
    
    .footer-title { 
      font-size: 1.8rem; 
      font-weight: 700; 
      color: var(--text-primary); 
      margin-bottom: 10px;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      display: inline-block;
    }
    
    .footer-subtitle { 
      font-size: 1.05rem; 
      color: var(--text-secondary); 
      margin-bottom: 20px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .footer-powered-by { 
      font-size: 0.9rem; 
      color: var(--text-secondary); 
      text-transform: uppercase; 
      letter-spacing: 1.5px; 
      margin-bottom: 5px;
    }
    
    .copyright {
      margin-top: 30px;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }
    
    /* Responsive Styles */
    @media (max-width: 992px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
      
      .sensor-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 768px) {
      .page-header {
        padding: 20px 0 10px;
      }
      
      .header-content {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .header-date {
        align-self: flex-start;
      }
      
      .header-title { 
        font-size: 1.9rem; 
      }
      
      .header-subtitle { 
        font-size: 1rem; 
      }
      
      .card {
        padding: 20px;
      }
      
      .sensor-item {
        padding: 15px;
      }
    }
    
    @media (max-width: 576px) {
      .sensor-grid { 
        grid-template-columns: 1fr; 
      }
      
      .map-container {
        height: 250px;
      }
      
      .chart {
        height: 180px;
      }
      
      .bencana-bar {
        gap: 10px;
      }
      
      .bencana-label {
        width: 100px;
        font-size: 0.9rem;
      }
      
      .footer-title {
        font-size: 1.5rem;
      }
    }

    /* Animation for values */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .pulse {
      animation: pulse 0.5s ease;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header class="page-header">
      <div class="header-content">
        <div class="header-title-group">
          <div class="logo">ER</div>
          <div class="header-titles">
            <h1 class="header-title">E-Rabani</h1>
            <p class="header-subtitle">Elektrik Robot Pendeteksi Bencana Dini</p>
          </div>
        </div>
        <div class="header-date">
          <i class="fas fa-calendar-alt"></i>
          <span id="current-date">Senin, 20 Juni 2025</span>
        </div>
      </div>
    </header>
    
    <div class="alert-banner">
      <i class="fas fa-exclamation-triangle alert-icon"></i>
      <div class="alert-content">
        <div class="alert-title">Peringatan Cuaca Ekstrem</div>
        <p class="alert-text">
          Status Siaga: Waspada angin kencang di wilayah Jakarta Utara hingga 25 km/jam. 
          <a href="#" class="alert-link">Lihat Detail <i class="fas fa-arrow-right"></i></a>
        </p>
      </div>
    </div>

    <main class="dashboard-grid">
      <div class="card">
        <div class="chart-title">
          <div class="title-content">
            <div class="chart-icon">
              <i class="fas fa-chart-bar"></i>
            </div>
            <span>Statistik Gempa Harian - <span id="namaBulan"></span> <span id="tahun"></span></span>
          </div>
          <button class="help-btn" title="Informasi">?</button>
        </div>
        <div class="chart-container">
          <div class="chart" id="chart"></div>
          <div class="legend">
            <div class="legend-item">
              <div class="legend-color" style="background-color: #4ade80;"></div>
              <span>Gempa Kecil</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: #facc15;"></div>
              <span>Gempa Sedang</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: #fb923c;"></div>
              <span>Gempa Kuat</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="card">
        <div class="chart-title">
          <div class="title-content">
            <div class="chart-icon">
              <i class="fas fa-layer-group"></i>
            </div>
            <span>Akumulasi Bencana 2025</span>
          </div>
          <button class="help-btn" title="Informasi">?</button>
        </div>
        <div class="bar-chart">
          <div class="bencana-bar">
            <div class="bencana-label">
              <div class="bencana-icon">
                <i class="fas fa-quake"></i>
              </div>
              Gempa
            </div>
            <div class="bar-fill-wrapper"><div class="bar-fill fill-gempa" style="--width: 40%;">15</div></div>
            <div class="bencana-value">15</div>
          </div>
          <div class="bencana-bar">
            <div class="bencana-label">
              <div class="bencana-icon">
                <i class="fas fa-water"></i>
              </div>
              Banjir
            </div>
            <div class="bar-fill-wrapper"><div class="bar-fill fill-banjir" style="--width: 70%;">19</div></div>
            <div class="bencana-value">19</div>
          </div>
          <div class="bencana-bar">
            <div class="bencana-label">
              <div class="bencana-icon">
                <i class="fas fa-hill-rockslide"></i>
              </div>
              Longsor
            </div>
            <div class="bar-fill-wrapper"><div class="bar-fill fill-longsor" style="--width: 20%;">1</div></div>
            <div class="bencana-value">1</div>
          </div>
          <div class="bencana-bar">
            <div class="bencana-label">
              <div class="bencana-icon">
                <i class="fas fa-wind"></i>
              </div>
              Angin Kencang
            </div>
            <div class="bar-fill-wrapper"><div class="bar-fill fill-angin" style="--width: 85%;">20</div></div>
            <div class="bencana-value">20</div>
          </div>
        </div>
      </div>
      
      <div class="card">
        <div class="chart-title">
          <div class="title-content">
            <div class="chart-icon">
              <i class="fas fa-map-marked-alt"></i>
            </div>
            <span>Peta Wilayah Jakarta</span>
          </div>
          <button class="help-btn" title="Informasi">?</button>
        </div>
        <div class="map-container">
        <iframe
  src="https://www.openstreetmap.org/export/embed.html?bbox=106.8413%2C-6.1473%2C106.8813%2C-6.1073&layer=mapnik&marker=-6.1273,106.8613"
  style="border:0; width:100%; height:400px;"
  allowfullscreen
  loading="lazy">
        </iframe>
      </div>

      <div class="card">
        <div class="chart-title">
          <div class="title-content">
            <div class="chart-icon">
              <i class="fas fa-satellite-dish"></i>
            </div>
            <span>Sensor Lingkungan</span>
          </div>
          <div>
            <span class="status-indicator status-online"></span>
            <button class="help-btn" title="Informasi">?</button>
          </div>
        </div>
        <div class="sensor-grid">
          <div class="sensor-item">
            <div class="sensor-icon">
              <i class="fas fa-thermometer-half"></i>
            </div>
            <div class="sensor-info">
              <div class="sensor-label">Suhu Udara</div>
              <div class="sensor-value" id="temp-value">
                26°C
              </div>
            </div>
          </div>
          <div class="sensor-item">
            <div class="sensor-icon">
              <i class="fas fa-tint"></i>
            </div>
            <div class="sensor-info">
              <div class="sensor-label">Kelembapan</div>
              <div class="sensor-value" id="humidity-value">
                78%
              </div>
            </div>
          </div>
          <div class="sensor-item">
            <div class="sensor-icon">
              <i class="fas fa-smog"></i>
            </div>
            <div class="sensor-info">
              <div class="sensor-label">Kualitas Udara</div>
              <div class="sensor-value" id="aqi-value">
                42
                <span class="aqi-badge aqi-good">Baik</span>
              </div>
            </div>
          </div>
          <div class="sensor-item">
            <div class="sensor-icon">
              <i class="fas fa-wind"></i>
            </div>
            <div class="sensor-info">
              <div class="sensor-label">Kecepatan Angin</div>
              <div class="sensor-value" id="wind-value">
                12 km/j
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

 <div class="card">
      <h2 class="chart-title">Pemantauan Kamera Langsung<button class="help-btn" data-modal-target="#modal-kamera">?</button></h2>
      <div class="video-feed-container"><img id="ip-cam-stream" src="" alt="Live IP Camera Stream. Silakan masukkan URL yang benar."></div>
    </div>

    <footer>

    <footer>
      <div class="footer-content">
        <div class="footer-icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <h2 class="footer-title">E-Rabani</h2>
        <p class="footer-subtitle">Sistem Elektrik Robot Pendeteksi Bencana Dini berbasis ROBOT SENSOR</p>
       
        <div class="copyright">
          &copy; 2025 KOMUNITAS PETA. All rights reserved.
        </div>
      </div>
    </footer>
  </div>

  <script>
    // Update current date
    const now = new Date();
    const options = { 
      weekday: 'long', 
      year: 'numeric', 
      month: 'long', 
      day: 'numeric'
    };
    document.getElementById('current-date').textContent = now.toLocaleDateString('id-ID', options);
    
    // Set month and year for earthquake chart
    const currentMonth = now.getMonth();
    const currentYear = now.getFullYear();
    const today = now.getDate();
    const namaBulan = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli',
                       'Agustus', 'September', 'Oktober', 'November', 'Desember'];
    
    document.getElementById('namaBulan').textContent = namaBulan[currentMonth];
    document.getElementById('tahun').textContent = currentYear;
    
    // Generate earthquake data
    function getDaysInMonth(month, year) { 
      return new Date(year, month + 1, 0).getDate(); 
    }
    const totalHari = getDaysInMonth(currentMonth, currentYear);
    
    function pseudoRandom(seed) {
      let random = (seed * 9301 + 49297) % 233280;
      return random / 233280.0;
    }
    
    function distributeGempa(total, seed) {
      if (total === 0) return { kecil: 0, sedang: 0, kuat: 0 };
      let sisa = total;
      let kuat = 0;
      if (sisa > 2 && pseudoRandom(seed + 1) > 0.7) {
        kuat = Math.floor(pseudoRandom(seed + 2) * (sisa / 2));
      }
      sisa -= kuat;
      let sedang = 0;
      if (sisa > 0) {
        sedang = Math.floor(pseudoRandom(seed + 3) * (sisa + 1));
      }
      sisa -= sedang;
      return { kecil: sisa, sedang, kuat };
    }
    
    const dataGempa = [];
    for (let i = 1; i <= totalHari; i++) {
      if (i > today) {
        dataGempa.push({ kecil: 0, sedang: 0, kuat: 0 });
        continue;
      }
      const seed = currentYear * 10000 + (currentMonth + 1) * 100 + i;
      const randomValue = pseudoRandom(seed);
      let totalGempaHarian;
      if (randomValue < 0.55) totalGempaHarian = 0;
      else if (randomValue < 0.80) totalGempaHarian = Math.floor(pseudoRandom(seed * 2) * 2) + 1;
      else if (randomValue < 0.95) totalGempaHarian = Math.floor(pseudoRandom(seed * 3) * 3) + 3;
      else totalGempaHarian = Math.floor(pseudoRandom(seed * 4) * 4) + 6;
      dataGempa.push(distributeGempa(totalGempaHarian, seed));
    }
    
    const allValues = dataGempa.flatMap(d => [d.kecil, d.sedang, d.kuat]);
    const maxGempa = Math.max(...allValues, 3);
    const chart = document.getElementById('chart');
    
    const CHART_HEIGHT_PX = 180; 
    
    dataGempa.forEach((gempaHarian, i) => {
      const container = document.createElement('div');
      container.className = 'bar-container';
      
      const barGroup = document.createElement('div');
      barGroup.className = 'bar-group';
      
      function createBar(kategori, jumlah) {
        const bar = document.createElement('div');
        bar.classList.add('bar', `bar-${kategori}`);
        bar.style.height = (jumlah > 0) ? (jumlah / maxGempa) * CHART_HEIGHT_PX + 'px' : '0px';
        bar.setAttribute('data-value', jumlah);
        return bar;
      }
      
      const barKecil = createBar('kecil', gempaHarian.kecil);
      const barSedang = createBar('sedang', gempaHarian.sedang);
      const barKuat = createBar('kuat', gempaHarian.kuat);
      
      barGroup.appendChild(barKecil);
      barGroup.appendChild(barSedang);
      barGroup.appendChild(barKuat);
      
      const label = document.createElement('div');
      label.className = 'label-gempa';
      label.textContent = i + 1;
      
      if (i + 1 === today) {
        label.classList.add('today-label');
      }
      
      container.appendChild(barGroup);
      container.appendChild(label);
      chart.appendChild(container);
    });
    
    // Simulate sensor data updates
    function updateSensorData() {
      const tempValue = document.getElementById('temp-value');
      const humidityValue = document.getElementById('humidity-value');
      const aqiValue = document.getElementById('aqi-value');
      const windValue = document.getElementById('wind-value');
      
      // Add pulse animation
      tempValue.classList.add('pulse');
      humidityValue.classList.add('pulse');
      aqiValue.classList.add('pulse');
      windValue.classList.add('pulse');
      
      // Update values
      setTimeout(() => {
        tempValue.textContent = (26 + Math.random() * 2).toFixed(1) + '°C';
        humidityValue.textContent = Math.floor(70 + Math.random() * 10) + '%';
        aqiValue.innerHTML = Math.floor(30 + Math.random() * 20) + ' <span class="aqi-badge aqi-good">Baik</span>';
        windValue.textContent = (10 + Math.random() * 5).toFixed(1) + ' km/j';
        
        // Remove animation
        setTimeout(() => {
          tempValue.classList.remove('pulse');
          humidityValue.classList.remove('pulse');
          aqiValue.classList.remove('pulse');
          windValue.classList.remove('pulse');
        }, 500);
      }, 300);
    }
    
    // Update sensor data every 30 seconds
    setInterval(updateSensorData, 30000);
    
    // Initial update
    updateSensorData();
  </script>
    
</body>
</html>
